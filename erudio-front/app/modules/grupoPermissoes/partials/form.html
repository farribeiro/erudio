<!--* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *    @author Municipio de Itajaí - Secretaria de Educação - DITEC         *
 *    @updated 30/06/2016                                                  *
 *    Pacote: Erudio                                                       *
 *                                                                         *
 *    Copyright (C) 2016 Prefeitura de Itajaí - Secretaria de Educação     *
 *                       DITEC - Diretoria de Tecnologias educacionais     *
 *                        ditec@itajai.sc.gov.br                           *
 *                                                                         *
 *    Este  programa  é  software livre, você pode redistribuí-lo e/ou     *
 *    modificá-lo sob os termos da Licença Pública Geral GNU, conforme     *
 *    publicada pela Free  Software  Foundation,  tanto  a versão 2 da     *
 *    Licença   como  (a  seu  critério)  qualquer  versão  mais  nova.    *
 *                                                                         *
 *    Este programa  é distribuído na expectativa de ser útil, mas SEM     *
 *    QUALQUER GARANTIA. Sem mesmo a garantia implícita de COMERCIALI-     *
 *    ZAÇÃO  ou  de ADEQUAÇÃO A QUALQUER PROPÓSITO EM PARTICULAR. Con-     *
 *    sulte  a  Licença  Pública  Geral  GNU para obter mais detalhes.     *
 *                                                                         *
 *    Você  deve  ter  recebido uma cópia da Licença Pública Geral GNU     *
 *    junto  com  este  programa. Se não, escreva para a Free Software     *
 *    Foundation,  Inc.,  59  Temple  Place,  Suite  330,  Boston,  MA     *
 *    02111-1307, USA.                                                     *
 *                                                                         *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->

<div class="row form-geral">    
    <div class="col s12 mobile-full">
        <div class="row form-box show-form">
            <div id="validate" class="card-panel">
                <form id="permissaoForm">
                    <div class="row">
                        <h3 class='card-title-h3' style="padding: 20px">{{ acao }} Grupo de Permissões</h3>
                    </div>
                    <div class="row">
                        <div class="input-field col s12 m6 l6">
                            <i class="material-icons prefix">account_circle</i>
                            <input id="nomeGrupoFocus" type="text" class="validate" data-ng-model="grupo.nome" data-ng-disabled="!escrita" required />
                            <label for="nomeGrupoFocus">Nome do Grupo*</label>
                        </div>                     
                        <div class="input-field col s12 m6 l6">
                            <i class="material-icons prefix">clear_all</i>
                            <input id="pesoGrupo" type="number" class="validate" data-ng-model="grupo.peso" min="{{pesoMinimo}}" data-ng-disabled="!escrita" required />
                            <label for="pesoGrupo">Peso*</label>
                        </div>                     
                    </div> 
                    <div class="row end-card">
                        <div class="col s12 right-align">
                            <a id="salvarPermissao" data-ng-click="finalizar()" class="waves-effect waves-blue btn-flat"><i class="material-icons left">save</i>SALVAR</a>
                        </div>
                    </div>
                </form>
            </div>
            <div class="card-panel" data-ng-show="grupo.id">
                <div class="row">
                    <div class="col s12">
                        <h3 class='card-title-h3' style="padding: 20px">Permissões do grupo</h3>
                    </div>
                    <div class="col s8">
                        <div class="input-field">
                            <i class="material-icons prefix">domain</i>
                            <select id="tipoPermissao" data-ng-model="atribuicao.permissao.id" class="validate" required>
                                <option selected disabled></option>
                                <option value="{{role.id}}" data-ng-repeat="role in roles">{{ role.nomeExibicao | uppercase }}</option>
                            </select>
                            <label for="tipoPermissao">Permissão</label>
                        </div>        
                    </div>
                    <div class="col s3">
                        <div class="input-field">
                            <i class="material-icons prefix">domain</i>
                            <select id="tipo" data-ng-model="atribuicao.tipoAcesso" class="validate" required>
                                <option value="L">LEITURA</option>
                                <option value="E">ESCRITA</option>
                            </select>
                            <label for="tipo">Acesso</label>
                        </div>
                    </div>
                    <div class="col s1">
                        <a style="margin-top: 25px;" data-ng-click="incluirPermissao()" class="btn-floating btn waves-effect waves-light pink accent-3"><i class="material-icons">add</i></a>
                    </div>
                    <table style="margin-top: 25px;" class='highlight striped table-pattern' data-ng-show="atribuicoes.length">
                        <thead>
                            <tr>
                                <th data-field='nome'>Nome de Exibição</th>
                                <th data-field='tipo'>Tipo</th>
                                <th class="hide-on-small-only">Remover</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr data-ng-repeat="perm in atribuicoes">
                                <td style="padding-top: 0; padding-bottom: 0;" class="celula-link relative mobile-full">
                                    <div style="padding: 15px">{{ perm.permissao.nomeExibicao }}</div>
                                </td>
                                <td style="padding-top: 0; padding-bottom: 0;">{{ carregarTipoRole(perm.tipoAcesso) }}</td>
                                <td style="padding-top: 0; padding-bottom: 0;"><i data-ng-click="prepararRemoverPermissao(perm)" data-target="remove-modal-permissao-grupo" data-position='top' data-delay='50' data-tooltip='Remover' class="material-icons modal-trigger delete-icon tooltipped">delete</i></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
